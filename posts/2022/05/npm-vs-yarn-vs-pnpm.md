---
title: 'npm, yarn, pnpm ë¹„êµí•´ë³´ê¸°'
tags:
  - javascript
  - npm
  - yarn
  - pnpm
published: true
date: 2022-05-20 22:26:01
description: 'ê·¸ë¦¬ê³  ìŠ¹ìëŠ” ğŸ¤”'
---

## Table of Contents

## Introduction

npm ì—ì„œ ì‹œì‘í•œ node package managementì˜ ì—­ì‚¬ëŠ”, ì´ì œ 3ê°€ì§€ ì˜µì…˜ì´ ì£¼ì–´ì ¸ ìˆë‹¤. yarn 1.0 (ì´ì œ yarn classic ì´ë¼ê³  ë¶€ë¥´ê² ë‹¤) ê³¼ yarn 2.0 (yarn berry) ë‘ ê°€ì§€ ë²„ì „ë„ ì‚¬ë­‡ ë‹¤ë¥¸ ì ì´ ë§ë‹¤ëŠ” ê²ƒì„ ê°ì•ˆí•œë‹¤ë©´, ì´ì œ í¬ê²Œ 4ê°€ì§€ ì„ íƒì§€ê°€ ì¡´ì¬ í•œë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤.

ê·¸ë¦¬ê³  ìœ„ 3ê°€ì§€ íŒ¨í‚¤ì§€ ê´€ë¦¬ìë“¤ì€ ì•„ë˜ì™€ ê°™ì€ ê¸°ë³¸ì ì¸ ê¸°ëŠ¥ (node ëª¨ë“ˆì„ ì„¤ì¹˜í•˜ê³ , ê´€ë¦¬í•˜ëŠ” ë“±)ì„ ì œê³µí•˜ê³  ìˆë‹¤.

- metadata ì‘ì„± ë° ê´€ë¦¬
- ëª¨ë“  dependencies ì¼ê´„ ì„¤ì¹˜ ë˜ëŠ” ì—…ë°ì´íŠ¸
- dependencies ì¶”ê°€, ì—…ë°ì´íŠ¸, ì‚­ì œ
- ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
- íŒ¨í‚¤ì§€ í¼ë¸”ë¦¬ì‰¬
- ë³´ì•ˆ ê²€ì‚¬

ë”°ë¼ì„œ ì„¤ì¹˜ ì†ë„ë‚˜ ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰, ë˜ëŠ” ê¸°ì¡´ ì›Œí¬ í”Œë¡œìš° ë“±ê³¼ ì–´ë–»ê²Œ ë§¤ì¹­ ì‹œí‚¬ì§€ì™€ ê°™ì€ ê¸°ëŠ¥ ì™¸ì ì¸ ìš”êµ¬ ì‚¬í•­ì— ë”°ë¼ íŒ¨í‚¤ì§€ ê´€ë¦¬ìë¥¼ ì„ íƒí•˜ëŠ” ì‹œëŒ€ê°€ ë„ë˜í–ˆë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤.

ê²‰ìœ¼ë¡œëŠ” ê¸°ëŠ¥ì ìœ¼ë¡œ ë¹„ìŠ·í•´ë³´ì´ê³  ë¬´ì—‡ì„ ì„ íƒí•˜ë“  ë³„ ì°¨ì´ëŠ” ì—†ì–´ë³´ì´ì§€ë§Œ, íŒ¨í‚¤ì§€ ê´€ë¦¬ìë“¤ì˜ ë‚´ë¶€ ë™ì‘ì€ ë§¤ìš° ë‹¤ë¥´ë‹¤. npm ê³¼ yarnì˜ ê²½ìš° flat í•œ node_modules í´ë”ì— dependencies ë¥¼ ì„¤ì¹˜í–ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì´ëŸ¬í•œ ì „ëµì€ ë¹„íŒì—ì„œ ììœ ë¡­ì§€ ëª»í•˜ë‹¤. (ì–´ë–¤ ë¬¸ì œì¸ì§€ëŠ” ë’¤ì—ì„œ ì„¤ëª…í•˜ë„ë¡ í•œë‹¤.)

ê·¸ë˜ì„œ ë“±ì¥í•œ pnpmì€ ì´ëŸ¬í•œ dependenciesë¥¼ ì¤‘ì²©ëœ node_modules í´ë”ì— íš¨ìœ¨ì ìœ¼ë¡œ ì €ì¥í•˜ê¸° ì‹œì‘í–ˆê³ , yarn berryëŠ” plug and play (pnp) ëª¨ë“œë¥¼ ë„ì…í•˜ì—¬ ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ì‹œì‘í–ˆë‹¤.

ì´ ì„¸ê°€ì§€ íŒ¨í‚¤ì§€ ê´€ë¦¬ìëŠ” ê°ê° ì–´ë–¤ íŠ¹ì§•ê³¼ ì—­ì‚¬ë¥¼ ê°€ì§€ê³  ìˆìœ¼ë©°, ë¬´ì—‡ì„ ì„ íƒí•´ì•¼í• ê¹Œ?

- [npm](https://www.npmjs.com/)
- [yarn classic](https://classic.yarnpkg.com/lang/en/)
- [yarn berry](https://github.com/yarnpkg/berry)
- [pnpm](https://pnpm.io/ko/)

> pnpm í™ˆí˜ì´ì§€ì— ìˆëŠ” yarnê³¼ npmì„ ì“°ë ˆê¸°í†µì— ì³ë°•ì€ ì´ë¯¸ì§€ê°€ ë§¤ìš° ì¸ìƒì ì´ë‹¤. ğŸ¤” vueê°€ reactë¥¼ ì“°ë ˆê¸°í†µì— ì³ë°•ëŠ” ì´ë¯¸ì§€ë¥¼ ë‹¬ì•„ë†¨ë‹¤ë©´...

## ìë°”ìŠ¤í¬ë¦½íŠ¸ íŒ¨í‚¤ì§€ ê´€ë¦¬ìì˜ ì—­ì‚¬

ëª¨ë‘ê°€ ì˜ ì•Œê³  ìˆëŠ” ê²ƒ ì²˜ëŸ¼ ìµœì´ˆì˜ íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ëŠ” 2010ë…„ 1ì›”ì— ë‚˜ì˜¨ npm ì´ë‹¤. npm ì€ íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ê°€ ì–´ë–¤ ë™ì‘ì„ í•´ì•¼í•˜ëŠ” ì§€ì— ëŒ€í•œ í•µì‹¬ì ì¸ ê°œë…ì„ ì¡ì•˜ë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤.

10ì—¬ë…„ì´ ë„˜ëŠ” ì‹œê°„ ë™ì•ˆ npm ì´ ì¡´ì¬í–ˆëŠ”ë°, yarn, pnpm ë“±ì´ ë“±ì¥í•˜ê²Œ ëœ ê²ƒì¼ê¹Œ?

- `node_modules` íš¨ìœ¨í™”ë¥¼ ìœ„í•œ ë‹¤ë¥¸ êµ¬ì¡° (nested vs flat, node_modules, vs pnp mode)
- ë³´ì•ˆì— ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” í˜¸ì´ìŠ¤íŒ… ì§€ì›
- ì„±ëŠ¥ì— ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆëŠ” `lock`íŒŒì¼ í˜•ì‹
- ë””ìŠ¤í¬ íš¨ìœ¨ì„±ì— ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” íŒ¨í‚¤ì§€ë¥¼ ë””ìŠ¤í¬ì— ì €ì¥í•˜ëŠ” ë°©ì‹
- ëŒ€ê·œëª¨ ëª¨ë…¸ë ˆí¬ì˜ ìœ ì§€ ë³´ìˆ˜ì„± ê³¼ ì†ë„ì— ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” workspaceë¼ ì•Œë ¤ì§„ ë©€í‹° íŒ¨í‚¤ì§€ ê´€ë¦¬ ë° ì§€ì›
- ìƒˆë¡œìš´ ë„êµ¬ì™€ ëª…ë ¹ì–´ ê´€ë¦¬ì— ëŒ€í•œ ê´€ë¦¬
  - ì´ì™€ ê´€ë ¨ëœ ë‹¤ì–‘í•˜ê³  í™•ì¥ê°€ëŠ¥í•œ í”ŒëŸ¬ê·¸ì¸ê³¼ ì»¤ë®¤ë‹ˆí‹° íˆ´
- ë‹¤ì–‘í•œ ê¸°ëŠ¥ êµ¬í˜„ ê°€ëŠ¥ì„±ê³¼ ìœ ì—°í•¨

npm ì´ ìµœì´ˆë¡œ ë“±ì¥í•˜ ì´ë˜ë¡œ ì´ëŸ¬í•œ ë‹ˆì¦ˆê°€ ì–´ë–»ê²Œ ë‚˜íƒ€ë‚¬ëŠ”ì§€, yarn classicì€ ê·¸ ì´í›„ ë“±ì¥í•´ì„œ ì–´ë–»ê²Œ í•´ê²°í–ˆëŠ”ì§€, pnpmì´ ì´ëŸ¬í•œ ê°œë…ì„ ì–´ë–»ê²Œ í™•ì¥í–ˆëŠ”ì§€, yarn berryê°€ ì „í†µì ì¸ ê°œë…ê³¼ í”„ë¡œí…ŒìŠ¤ì— ì˜í•´ ì„¤ì •ëœ í‹€ì„ ê¹¨ê¸° ìœ„í•´ ì–´ë– í•œ ë…¸ë ¥ì„ í–ˆëŠ”ì§€ ê°„ëµí•œ ì—­ì‚¬ë¥¼ íŒŒì•…í•´ë³´ì.

### ì„ êµ¬ì npm

ë³¸ê²©ì ìœ¼ë¡œ ì‹œì‘í•˜ê¸°ì— ì•ì„œ ì¬ë°ŒëŠ” ì‚¬ì‹¤ì„ ì´ì•¼ê¸° í•´ë³´ìë©´, `npm`ì€ `node package manager`ì˜ ì•½ìê°€ ì•„ë‹ˆë‹¤. npmì˜ ì „ì‹ ì€ ì‚¬ì‹¤ `pm`ì´ë¼ ë¶ˆë¦¬ëŠ” bash ìœ í‹¸ë¦¬í‹°ì¸ë°, ì´ëŠ” `pkgmakeinst`ì˜ ì•½ìë‹¤. ê·¸ë¦¬ê³  ì´ì˜ node ë²„ì „ì´ `npm`ì¸ ê²ƒì´ë‹¤.

> [https://github.com/npm/cli#is-npm-an-acronym-for-node-package-manager](https://github.com/npm/cli#is-npm-an-acronym-for-node-package-manager)

npm ì´ì „ì—ëŠ” í”„ë¡œì íŠ¸ì˜ dependenciesë¥¼ ìˆ˜ë™ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œí•˜ê³  ê´€ë¦¬í•˜ì˜€ê¸° ë•Œë¬¸ì— ì—„ì²­ë‚œ í˜ëª…ì„ ê°€ì ¸ì™”ë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤. ì´ì™€ ë”ë¶ˆì–´ ë©”íƒ€ë°ì´í„°ë¥¼ ê°€ì§€ê³  ìˆëŠ” `package.json`ì™€ ê°™ì€ ê°œë…, dependenciesë¥¼ `node_modules`ë¼ ë¶ˆë¦¬ëŠ” í´ë”ì— ì„¤ì¹˜í•œë‹¤ëŠ” ê°œë…, ì»¤ìŠ¤í…€ ìŠ¤í¬ë¦½íŠ¸, public & private íŒ¨í‚¤ì§€ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì™€ ê°™ì€ ê°œë…ë“¤ ëª¨ë‘ npmì— ì˜í•´ ë„ì…ë˜ì—ˆë‹¤.

### ë§ì€ í˜ëª…ì„ ê°€ì ¸ì˜¨ yarn classic

[2016ë…„ì˜ ë¸”ë¡œê·¸ ê¸€](https://engineering.fb.com/2016/10/11/web/yarn-a-new-package-manager-for-javascript/)ì—ì„œ, í˜ì´ìŠ¤ë¶ì€ êµ¬ê¸€ê³¼ ëª‡ëª‡ ë‹¤ë¥¸ ê°œë°œìë“¤ê³¼ í•¨ê»˜ npmì´ ê°€ì§€ê³  ìˆë˜ ì¼ê´€ì„±, ë³´ì•ˆ, ì„±ëŠ¥ ë¬¸ì œ ë“±ì„ í•´ê²°í•˜ê¸° ìœ„í•œ ìƒˆë¡œìš´ íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ë¥¼ ë§Œë“¤ê¸° ìœ„í•œ ì‹œë„ë¥¼ ì§„í–‰ ì¤‘ì´ë¼ê³  ë°œí‘œ í–ˆë‹¤. ê·¸ë¦¬ê³  ì´ë“¬í•´ `Yet Another Resource Negotiator`ì˜ ì•½ìì¸ yarnì„ ë°œí‘œí–ˆë‹¤.

yarnì€ ëŒ€ë¶€ë¶„ì˜ ê°œë…ê³¼ í”„ë¡œì„¸ìŠ¤ì— npmì„ ê¸°ë°˜ìœ¼ë¡œ ì„¤ê³„í–ˆì§€ë§Œ, ì´ì™¸ì— íŒ¨í‚¤ì§€ ê´€ë¦¬ì í™˜ê²½ì— í° ì˜í–¥ì„ ë¯¸ì³¤ë‹¤. npmê³¼ ëŒ€ì¡°ì ìœ¼ë¡œ, yarnì€ ì´ˆê¸°ë²„ì „ì˜ npmì˜ ì£¼ìš” ë¬¸ì œì  ì¤‘ í•˜ë‚˜ì˜€ë˜ ì„¤ì¹˜ í”„ë¡œì„¸ìŠ¤ì˜ ì†ë„ë¥¼ ë†’ì´ê¸° ìœ„í•´ ì‘ì—…ì„ ë³‘ë ¬í™” í•˜ì˜€ë‹¤.

yarnì€ dx(ê°œë°œì ê²½í—˜), ë³´ì•ˆ ë° ì„±ëŠ¥ì— ëŒ€í•œ ê¸°ì¤€ì„ ë†’ì˜€ìœ¼ë©°, ë‹¤ìŒê³¼ ê°™ì€ ê°œë…ì„ íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ì— ë„ì…í•˜ì˜€ë‹¤.

- native ëª¨ë…¸ë ˆí¬ ì§€ì›
- cache-aware ì„¤ì¹˜
- ì˜¤í”„ë¼ì¸ ìºì‹±
- lock files

yarn classicì€ 2020ë…„ ë¶€í„° ìœ ì§€ë³´ìˆ˜ ëª¨ë“œë¡œ ì „í™˜ë˜ì—ˆë‹¤. ê·¸ë¦¬ê³  1.x ë²„ì „ì€ ëª¨ë‘ ë ˆê±°ì‹œë¡œ ê°„ì£¼í•˜ê³  yarn classicìœ¼ë¡œ ì´ë¦„ì´ ë°”ë€Œì—ˆë‹¤. í˜„ì¬ëŠ” yarn berryì—ì„œ ê°œë°œê³¼ ê°œì„ ì´ ì´ë£¨ì–´ì§€ê³  ìˆë‹¤.

### pnpm ë¹ ë¥´ê³  íš¨ìœ¨ì ì¸ ë””ìŠ¤í¬ ê´€ë¦¬

pnpmì€ 2017ë…„ì— ë§Œë“¤ì–´ì¡Œìœ¼ë©°, npm ì˜ drop-in replacement(ì„¤ì •ì„ ë°”ê¿€ í•„ìš” ì—†ì´ ë°”ë¡œ ì‚¬ìš©ê°€ëŠ¥í•˜ë©°, ì†ë„ì™€ ì•ˆì •ì„± ë“± ë‹¤ì–‘í•œ ê¸°ëŠ¥ í–¥ìƒì´ ì´ë£¨ì–´ì§€ëŠ” ëŒ€ì²´í’ˆ) ìœ¼ë¡œ, npmë§Œ ìˆë‹¤ë©´ ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

pnpm ì œì‘ìë“¤ì´ ìƒê°í•œ npm ê³¼ yarnì˜ ê°€ì¥ í° ë¬¸ì œëŠ” í”„ë¡œì íŠ¸ ê°„ì— ì‚¬ìš©ë˜ëŠ” dependenciesì˜ ì¤‘ë³µ ì €ì¥ì´ë‹¤. yarn classicì´ ë¬¼ë¡  npm ë³´ë‹¤ ë¹ ë¥´ì§€ë§Œ, ë‘ ë§¤ë‹ˆì € ëª¨ë‘ node_modules ë‚´ë¶€ì— flatí•˜ê²Œ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ì—¬ (=ë™ì¼í•œ ë””ë ‰í† ë¦¬ì— flatí•˜ê²Œ ì €ì¥) ê´€ë¦¬í–ˆë‹¤.

pnpmì€ ì´ëŸ¬í•œ í˜¸ì´ìŠ¤íŠ¸ ë°©ì‹ ëŒ€ì‹ , ë‹¤ë¥¸ dependenciesë¥¼ í•´ê²°í•˜ëŠ” ì „ëµì¸ [content-addressable storage](https://pnpm.io/next/symlinked-node-modules-structure)ë¥¼ ì‚¬ìš©í–ˆë‹¤. ì´ ë°©ë²•ì„ ì‚¬ìš©í•˜ë©´, home í´ë”ì˜ ê¸€ë¡œë²Œ ì €ì¥ì†Œ (`~/.pnpm-store`)ì— íŒ¨í‚¤ì§€ë¥¼ ì €ì¥í•˜ëŠ” ì¤‘ì²©ëœ node_modules í´ë”ê°€ ìƒì„±ëœë‹¤. ë”°ë¼ì„œ ëª¨ë“  ë²„ì „ì˜ dependenciesì€ í•´ë‹¹ í´ë”ì— ë¬¼ë¦¬ì ìœ¼ë¡œ í•œë²ˆë§Œ ì €ì¥ë˜ë¯€ë¡œ, single source of truthë¥¼ êµ¬ì„±í•˜ê³ , ìƒë‹¹í•œ ë””ìŠ¤í¬ ê³µê°„ì„ ì ˆì•½í•  ìˆ˜ ìˆë‹¤.

ì´ëŠ” node_modulesì˜ ë ˆì´ì•„ì›ƒì„ í†µí•´ ì´ë£¨ì–´ì§€ê³ , `symlinks`ë¥¼ ì‚¬ìš©í•˜ì—¬ dependenciesì˜ ì¤‘ì²©ëœ êµ¬ì¡°ë¥¼ ìƒì„±í•œë‹¤. ì—¬ê¸°ì„œ í´ë” ë‚´ë¶€ì˜ ëª¨ë“  íŒ¨í‚¤ì§€ íŒŒì¼ì€ ì €ì¥ì†Œì— ëŒ€í•œ í•˜ë“œ ë§í¬ë¡œ êµ¬ì„±ë˜ì–´ ìˆë‹¤.

![pnpm](https://d33wubrfki0l68.cloudfront.net/64b2f62af3b1c3dc4314df0ec517d9661d03b934/aca71/assets/images/node-modules-structure-8ab301ddaed3b7530858b233f5b3be57.jpg)

> [https://pnpm.io/blog/2021/12/29/yearly-update](https://pnpm.io/blog/2021/12/29/yearly-update)

### yarn berry, plug n play

yarn berry ëŠ” 2020ë…„ 1ì›”ì— ì¶œì‹œë˜ì—ˆìœ¼ë©° yarn classicì˜ ì—…ê·¸ë ˆì´ë“œ ë²„ì „ì´ë‹¤. yarn íŒ€ì€ ë³¸ì§ˆì ìœ¼ë¡œ ìƒˆë¡œìš´ ì½”ë“œ ë² ì´ìŠ¤ì™€ ìƒˆë¡œìš´ ì›ì¹™ì„ ê°€ì§„ ì™„ì „íˆ ìƒˆë¡œìš´ íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ë¼ëŠ” ê²ƒì„ ë¶„ëª…í•˜ê²Œ í•˜ê¸° ìœ„í•´ `yarn berry`ë¼ê³  ë¶€ë¥´ê¸° ì‹œì‘í–ˆë‹¤.

yarn berryì—ì„œ ëˆˆì—¬ê²¨ ë´ì•¼ í•  ê²ƒì€ [plug n play](https://yarnpkg.com/features/pnp/)ë¡œ, [node_modulesë¥¼ fix ìœ„í•œ ì „ëµ](https://yarnpkg.com/features/pnp#fixing-node_modules)ì´ë‹¤. node_modulesë¥¼ ìƒì„±í•˜ëŠ” ëŒ€ì‹ , `.pnp.cjs`ë¼ ë¶ˆë¦¬ëŠ” ì˜ì¡´ì„± lookup íŒŒì¼ì´ ìƒì„±ë˜ëŠ”ë°, ì´ëŠ” ì¤‘ì²©ëœ í´ë” êµ¬ì¡° ëŒ€ì‹  ë‹¨ì¼ íŒŒì¼ ì´ê¸° ë•Œë¬¸ì— ë” íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤. ë˜í•œ ëª¨ë“  íŒ¨í‚¤ì§€ëŠ” `.yarn/cache` í´ë” ë‚´ë¶€ì— zip íŒŒì¼ë¡œ ì €ì¥ë˜ë¯€ë¡œ, node_modules í´ë”ë³´ë‹¤ ë” ë””ìŠ¤í¬ ê³µê°„ì„ ì ê²Œ ì°¨ì§€í•œë‹¤.

ì´ ëª¨ë“  ë³€í™”ëŠ”, ë¦´ë¦¬ì¦ˆ ì´í›„ì— ë§ì€ ë…¼ë€ì„ ì¼ìœ¼ì¼°ë‹¤. pnpì˜ breaking changeëŠ” [ë©”ì¸í…Œì´ë„ˆë“¤ë¡œ í•˜ì—¬ê¸ˆ ê¸°ì¡´ì— ì¡´ì¬í•˜ëŠ” íŒ¨í‚¤ì§€ë¥¼ ì—…ë°ì´íŠ¸ í•˜ê²Œ ë” ë§Œë“¤ì—ˆë‹¤.](https://blog.hao.dev/state-of-yarn-2-berry-in-2021) ìƒˆë¡œìš´ pnp ë°©ì‹ì€ defaultë¡œ ì„¤ì •ë˜ì—ˆê³ , node_modulesë¡œ ëŒì•„ê°€ëŠ” ê²ƒ ë˜í•œ ê°„ë‹¨í•˜ì§€ ì•Šì•˜ë‹¤. ì´ ë•Œë¬¸ì— [ë§ì€ ìœ ëª…í•œ ê°œë°œìë“¤ì´ yarn berryë¥¼ opt-inìœ¼ë¡œ ë§Œë“¤ì§€ ì•Šì€ ê²ƒì— ëŒ€í•´ ë¹„íŒí•˜ê¸° ì‹œì‘í–ˆë‹¤.](https://www.youtube.com/watch?v=bPae4Z8BFt8)

yarn berry íŒ€ì€ ì´í›„ ë¦´ë¦¬ì¦ˆì—ì„œ ë§ì€ ë¬¸ì œë¥¼ í•´ê²°í•˜ê³ ì ë…¸ë ¥í–ˆë‹¤. PnPì˜ ë¹„í˜¸í™˜ì„±ì„ í•´ê²°í•˜ê¸° ìœ„í•´ default ì‘ë™ ëª¨ë“œë¥¼ ì‰½ê²Œ ë°”ê¾¸ê¸° ìœ„í•œ ëª‡ê°€ì§€ ë°©ë²•ì„ ì œì•ˆí–ˆë‹¤. [node_modules plugin](https://github.com/yarnpkg/berry/tree/master/packages/plugin-nm)ì˜ ë„ì›€ìœ¼ë¡œ, ê¸°ë³¸ì ì¸ node_modulesë¡œ ëŒì•„ê°€ëŠ” ë° í•œ ì¤„ì˜ ì½”ë“œë§Œìœ¼ë¡œ ê°€ëŠ¥í•´ì¡Œë‹¤.

[í˜¸í™˜ì„± í‘œ](https://yarnpkg.com/features/pnp#compatibility-table)ì—ì„œ ë³¼ ìˆ˜ ìˆë“¯ì´, ë§ì€ ëŒ€í˜• í”„ë¡œì íŠ¸ ë“¤ì´ ì ì°¨ yarn berryë¥¼ ì§€ì›í•˜ëŠ” ë°©í–¥ìœ¼ë¡œ ê°€ê¸° ì‹œì‘í–ˆë‹¤.

ì•ì„  3ê°€ì§€ íŒ¨í‚¤ì§€ ë§¤ë‹ˆì € ì¤‘ì—ì„œ ê°€ì¥ ìµœê·¼ì— ë‚˜ì™”ì§€ë§Œ, íŒ¨í‚¤ë‹ˆ ë§¤ë‹ˆì € í™˜ê²½ì— ë§ì€ ì˜í–¥ì„ ë¯¸ì³¤ë‹¤. 2020ë…„ë§, pnpmë„ plug n play ë°©ì‹ì„ ì§€ì›í•˜ê¸° ì‹œì‘í–ˆë‹¤.

## íŒ¨í‚¤ì§€ ë§¤ë‹ˆì € ì„¤ì¹˜í•˜ê¸°

íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ”, ê°œë°œìì˜ ë¡œì»¬ í˜¹ì€ CI/CD ì‹œìŠ¤í…œì— ì„¤ì¹˜í•´ì•¼ í•œë‹¤.

### npm

nodejs ë‚´ë¶€ì— npmì´ ë‚´ì¥ë˜ì–´ ìˆìœ¼ë¯€ë¡œ, ì¶”ê°€ì ìœ¼ë¡œ ì‘ì—…ì„ í•  í•„ìš”ê°€ ì—†ë‹¤. [nvm](https://github.com/nvm-sh/nvm)ì´ë‚˜ [volta](https://volta.sh/)ë¥¼ ì‚¬ìš©í•˜ë©´, nodeì™€ npm ë²„ì „ì„ ê´€ë¦¬í•˜ëŠ”ë° ë§¤ìš° ìœ ìš©í•˜ê²Œ ì“¸ ìˆ˜ ìˆë‹¤.

### yarn classic

`npm i -g yarn`ìœ¼ë¡œ ì„¤ì¹˜í•˜ë©´ ëœë‹¤.

### yarn berry

[yarn classicì—ì„œ yarn berryë¡œ ë„˜ì–´ê°€ëŠ” ë°©ë²•](https://yarnpkg.com/getting-started/migration)ìœ¼ë¡œ ì¶”ì²œí• ë§Œí•œ ê²ƒì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

- yarn 1.x ë“± ìµœì‹ ë²„ì „ìœ¼ë¡œ ì—…ë°ì´íŠ¸
- `yarn set version berry`

[ì‚¬ì‹¤ ì¶”ì²œí•˜ëŠ” ë°©ë²•](https://yarnpkg.com/getting-started/install#install-corepack)ì€ Corepackì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.

[Corepack](https://nodejs.org/api/corepack.html)ì€ yarn berry ê°œë°œìì— ì˜í•´ ë§Œë“¤ì–´ì§„ ë„êµ¬ë¡œ, [package manager manager](https://github.com/nodejs/TSC/issues/904) (;;;) ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì²˜ìŒ ì œì•ˆë˜ì—ˆê³ , node lts v16ì— ë¨¸ì§€ë˜ì—ˆë‹¤.

Corepackì˜ ë„ì›€ìœ¼ë¡œ nodeëŠ” yarn classic, yarn berry, pnpmì˜ ë°”ì´ë„ˆë¦¬ë¥¼ shimìœ¼ë¡œ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì— npmì˜ ëŒ€ì²´ íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ë¥¼ ë³„ë„ë¡œ ì„¤ì¹˜í•  í•„ìš”ëŠ” ì—†ë‹¤. ì´ shimì„ í™œìš©í•˜ë©´, yarnê³¼ pnpm ëª…ë ¹ì–´ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì„¤í”¼í•  í•„ìš” ì—†ì´, ì‹¤í–‰í•  ìˆ˜ ì‡ë‹¤.

Corepackì€ nodejs@16.9.0 ë¶€í„° ì‚¬ì „ ì„¤ì¹˜ë˜ë©°, ì´ì „ ë²„ì „ì—ì„œëŠ” `npm install -g corepack`ìœ¼ë¡œ ì„¤ì¹˜í•  ìˆ˜ ìˆë‹¤.

Corepackì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ”, ë¨¼ì € í™œì„±í™”ë¥¼ í•´ì•¼ í•œë‹¤.

```
$ corepack enable
$ corepack prepare yarn@3.1.1 --activate
```

### pnpm

pnpm ë„ ë§ˆì°¬ê°€ì§€ ë‘ ê°€ì§€ ë°©ë²•ìœ¼ë¡œ ì„¤ì¹˜ í•  ìˆ˜ ìˆë‹¤.

- `$ npm i -g pnpm`
- `$ corepack prepare pnpm@6.24.2 --activate`

## í”„ë¡œì íŠ¸ êµ¬ì¡°

í”„ë¡œì íŠ¸ì˜ êµ¬ì¡°ë¥¼ ì‚´í´ë³´ë©´, ê° íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ì˜ ì£¼ìš” íŠ¹ì„±ì„ í•œëˆˆì— ì‚´í´ë³¼ ìˆ˜ ìˆë‹¤. íŠ¹ì • íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ë¥¼ êµ¬ì„±í•˜ëŠ”ë° ì‚¬ìš©í•˜ëŠ” íŒŒì¼ê³¼, ì„¤ì¹˜ë‹¨ê³„ì—ì„œ ìƒì„±ë˜ëŠ” íŒŒì¼ì„ ì‰½ê²Œ ì•Œì•„ë³¼ ìˆ˜ ìˆë‹¤.

ê¸°ë³¸ì ìœ¼ë¡œ, ëª¨ë“  íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ëŠ” ëª¨ë“  ì¤‘ìš”í•œ ë©”íƒ€ ì •ë³´ë¥¼ `package.json`ì— ì €ì¥í•œë‹¤. ë˜í•œ ë£¨íŠ¸ ë ˆë²¨ì— ì„¤ì •íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ í”„ë¼ì´ë¹— ë ˆì§€ìŠ¤íŠ¸ë¦¬ë‚˜ dependency resolution ë°©ë²•ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤. ê·¸ë¦¬ê³  ì´ ë‹¨ê³„ì—ì„œ dependenciesë¥¼ íŒŒì¼ êµ¬ì¡° (node_modules)ì— ì €ì¥í•˜ê³  lock íŒŒì¼ì´ ìƒì„±ëœë‹¤.

> ì´ ê¸€ì—ì„œëŠ” workspacesì— ëŒ€í•´ì„œëŠ” ë‹¤ë£¨ì§€ ì•ŠëŠ”ë‹¤.

### npm

`$npm install` ë˜ëŠ” `$npm i` ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´, `package-lock.json`ì´ ìƒì„±ë˜ê³  `node_modules` í´ë”ë„ ìƒì„±ëœë‹¤. ì´ ì™¸ì—ë„ `.npmrc` ì„¤ì • íŒŒì¼ë„ ìƒì„±ë  ìˆ˜ ìˆë‹¤.

```
.
â”œâ”€â”€ node_modules/
â”œâ”€â”€ .npmrc
â”œâ”€â”€ package-lock.json
â””â”€â”€ package.json
```

### yarn classic

`$yarn`ì„ ì‹¤í–‰í•˜ë©´, `yarn.lock`ê³¼ `node_modules` í´ë”ê°€ ìƒì„±ëœë‹¤. ë§ˆì°¬ê°€ì§€ë¡œ [`.yarnrc` íŒŒì¼](https://classic.yarnpkg.com/en/docs/yarnrc)ë„ ì˜µì…”ë„ë¡œ ìƒì„±í•  ìˆ˜ ìˆë‹¤. ì´ì— ë”í•´ `.npmrc` íŒŒì¼ì´ ìˆìœ¼ë©´ ì´ë¥¼ ì´ìš©í•  ìˆ˜ë„ ìˆë‹¤. ê·¸ë¦¬ê³  ìºì‹œ í´ë”ì¸ `.yarn/cache/`ì™€ í˜„ì¬ yarn classicì˜ ë²„ì „ì„ ì €ì¥í•˜ëŠ” `.yarn/releases/`ë„ ìƒì„±ë  ìˆ˜ ìˆë‹¤. ì´ì²˜ëŸ¼ ì„¤ì •ì— ë”°ë¼ì„œ ë‹¤ì–‘í•˜ê²Œ ë³€ê²½ë  ìˆ˜ ìˆë‹¤.

```
.
â”œâ”€â”€ .yarn/
â”‚   â”œâ”€â”€ cache/
â”‚   â””â”€â”€ releases/
â”‚       â””â”€â”€ yarn-1.22.17.cjs
â”œâ”€â”€ node_modules/
â”œâ”€â”€ .yarnrc
â”œâ”€â”€ package.json
â””â”€â”€ yarn.lock
```

### yarn berryì™€ `node_modules`

install modeì— ê´€ê³„ ì—†ì´, yarn berry í”„ë¡œì íŠ¸ì—ì„œëŠ” ë‹¤ë¥¸ íŒ¨í‚¤ì§€ ê´€ë¦¬ìë³´ë‹¤ ë” ë§ì€ íŒŒì¼ ë³´ë‹¤ í´ë”ë¥¼ ì²˜ë¦¬í•´ì•¼ í•œë‹¤. ì¼ë¶€ëŠ” ì„ íƒì‚¬í•­ì´ê³ , ê·¸ë¦¬ê³  ì¼ë¶€ëŠ” í•„ìˆ˜ ì‚¬í•­ì´ë‹¤.

yarn berryëŠ” ë”ì´ìƒ `.npmrc` ë‹¤ `.yarnrc`ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. ëŒ€ì‹  [`yarnrc.yml` ì„¤ì • íŒŒì¼](https://yarnpkg.com/configuration/yarnrc)ì„ í•„ìš”ë¡œ í•œë‹¤. ì „í†µì ì¸ `node_modules`ë¥¼ ìƒì„±í•˜ëŠ” ì›Œí¬í”Œë¡œìš°ê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš°, [nodeLinker config](https://yarnpkg.com/configuration/yarnrc#nodeLinker) íŒŒì¼ì„ ì•„ë˜ì™€ ê°™ì€ í˜•íƒœë¡œ ì œê³µí•´ì•¼ í•œë‹¤.

```
# .yarnrc.yml
nodeLinker: node-modules # or pnpm
```

`$ yarn`ì„ ì‹¤í–‰í•˜ë©´, ëª¨ë“  ì˜ì¡´ì„±ì„ `node_modules`ì— ì„¤ì¹˜í•œë‹¤. `yarn.lock` íŒŒì¼ì´ ìƒì„±ë˜ëŠ”ë°, ì´ íŒŒì¼ì€ ê¸°ì¡´ `yarn classic`ê³¼ í˜¸í™˜ë˜ì§€ëŠ” ì•ŠëŠ”ë‹¤. ë˜í•œ ì˜¤í”„ë¼ì¸ ëª¨ë“œì—ì„œ ì„¤ì¹˜ë¥¼ ìœ„í•´ `.yarn/cache` í´ë”ë„ ìƒì„±ëœë‹¤. `releases` í´ë”ëŠ” í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” yarn berryì˜ ë²„ì „ì„ ì €ì¥í•˜ê¸° ìœ„í•´ ì˜µì…”ë„ë¡œ ìƒì„±ëœë‹¤.

```
.
â”œâ”€â”€ .yarn/
â”‚   â”œâ”€â”€ cache/
â”‚   â””â”€â”€ releases/
â”‚       â””â”€â”€ yarn-3.1.1.cjs
â”œâ”€â”€ node_modules/
â”œâ”€â”€ .yarnrc.yml
â”œâ”€â”€ package.json
â””â”€â”€ yarn.lock
```

### yarn berry with pnp

PnP ëª¨ë“œì—ëŠ” [strict](https://yarnpkg.com/features/pnp)ì™€ [loose](https://yarnpkg.com/features/pnp#pnp-loose-mode) ëª¨ë“œê°€ ìˆëŠ”ë°, ì¼ë‹¨ì€ ëª¨ë“œì— ìƒê´€ì—†ì´ `yarn`ì„ ì‹¤í–‰í•˜ë©´ `.yarn/cache`ì™€ `.yarn/unplugged`, `.pnp.cjs` `yarn.lock` íŒŒì¼ì´ ìƒì„±ëœë‹¤. strict ëª¨ë“œëŠ” ê¸°ë³¸ ê°’ì´ê³ , looseëŠ” ì•„ë˜ ì²˜ëŸ¼ ì˜µì…”ë„ë¡œ ì„¤ì •í•´ë‘ì–´ì•¼ í•œë‹¤.

```
# .yarnrc.yml
nodeLinker: pnp
pnpMode: loose
```

PnP í”„ë¡œì íŠ¸ì—ì„œ, `.yarn/` í´ë” ë‚´ë¶€ì—ëŠ” `release/`ì™¸ì—ë„ [ide ì§€ì›](https://yarnpkg.com/getting-started/editor-sdks)ì„ ìœ„í•œ `sdk/` í´ë”ë¥¼ í¬í•¨í•  ê°€ëŠ¥ì„±ì´ ë†’ë‹¤. [ì´ì™¸ì—ë„ ì‚¬ìš©ë¡€ì— ë”°ë¼ì„œ, ë‹¤ì–‘í•œ í´ë”ë“¤ì´ ìƒì„±ë  ìˆ˜ ìˆë‹¤.](https://yarnpkg.com/getting-started/qa#which-files-should-be-gitignored)

```
.
â”œâ”€â”€ .yarn/
â”‚   â”œâ”€â”€ cache/
â”‚   â”œâ”€â”€ releases/
â”‚   â”‚   â””â”€â”€ yarn-3.1.1.cjs
â”‚   â”œâ”€â”€ sdk/
â”‚   â””â”€â”€ unplugged/
â”œâ”€â”€ .pnp.cjs
â”œâ”€â”€ .pnp.loader.mjs
â”œâ”€â”€ .yarnrc.yml
â”œâ”€â”€ package.json
â””â”€â”€ yarn.lock
```

### pnpm

`pnpm`ë„ ë‹¤ë¥¸ íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ì™€ ë§ˆì°¬ê°€ì§€ë¡œ `package.json` ì´ í•„ìš”í•˜ë‹¤. `$ pnpm i`ë¥¼ ì‹¤í–‰í•˜ë©´, `node_modules` ê°€ ìƒì„±ë˜ëŠ” ê²ƒ ê¹Œì§€ëŠ” ë‹¤ë¥¸ íŒ¨í‚¤ì§€ ê´€ë¦¬ìì™€ ë™ì¼í•˜ì§€ë§Œ, ì•ì„œ ì–¸ê¸‰í•œ `content-addressable storage approach`ë¼ëŠ” íŠ¹ì„± ë•Œë¬¸ì— ì´í›„ì˜ êµ¬ì¡°ê°€ ì™„ì „íˆ ë‹¤ë¥´ë‹¤.

pnpmì€ ìì²´ lock íŒŒì¼ì¸ `pnp-lock.yml`ì„ ìƒì„±í•œë‹¤. ê·¸ë¦¬ê³  ë§ˆì°¬ê°€ì§€ë¡œ `.npmrc`ë¡œ ì„¤ì •ì„ ì¶”ê°€í•  ìˆ˜ë„ ìˆë‹¤.

## Lock íŒŒì¼ê³¼ dependency ì €ì¥

ì•ì„œ ì–¸ê¸‰í•œ ê²ƒ ì²˜ëŸ¼, ëª¨ë“  íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ëŠ” ê°ì ë‹¤ë¥¸ í˜•íƒœì˜ lock íŒŒì¼ì´ ì¡´ì¬í•œë‹¤.

ì¼ë‹¨ lock íŒŒì¼ì˜ ì •ì˜ë¥¼ ë¨¼ì € ì‚´í´ë³´ë©´, lock íŒŒì¼ì´ë€ ë§¤ ì„¤ì¹˜ì‹œ ê²°ì •ì ì´ê³  (= í•­ìƒ ê°™ì€ ë²„ì „ì„ ì„¤ì¹˜í•˜ê³ ) ì˜ˆì¸¡ê°€ëŠ¥í•œ íŠ¹ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•˜ì—¬, ê° ë²„ì „ì˜ ì •í™•í•œ ì˜ì¡´ì„± ë²„ì „ì„ ì €ì¥í•˜ê³  ìˆëŠ” íŒŒì¼ì„ ì˜ë¯¸í•œë‹¤. `package.json`ì€ ì •í™•í•œ ë²„ì „ì´ ê¸°ì¬ë˜ì–´ ìˆëŠ” ê²ƒì´ ì•„ë‹ˆê³ , `>= 1.2.5`ì™€ ê°™ì€ í˜•ì‹ì˜ [ë²„ì „ ë²”ìœ„ aka ì‹œë©˜í‹± ë²„ì €ë‹](https://docs.npmjs.com/about-semantic-versioning)ì´ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì—, lockíŒŒì¼ì´ ì—†ë‹¤ë©´ ë§¤ ì„¤ì¹˜ë§ˆë‹¤ ì„¤ì¹˜í•˜ëŠ” ë²„ì „ì´ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆë‹¤.

lock íŒŒì¼ì€ ë˜í•œ ì²´í¬ì„¬ì´ ì¡´ì¬í•˜ëŠ”ë°, ì´ì— ëŒ€í•´ì„œëŠ” ë³´ì•ˆ ê´€ë ¨ ì„¹ì…˜ì—ì„œ ë‹¤ë£¬ë‹¤.

ì´ lock íŒŒì¼ì€ npm@5 ë¶€í„° (`package-lock.json`), pnpmì€ `pnpm-lock.yaml`, yarnì€ `yarn.lock` í˜•íƒœë¡œ ì¡´ì¬í•œë‹¤.

ì´ì „ ì„¹ì…˜ì—ì„œ ì–¸ê¸‰í–ˆë˜ ê²ƒì²˜ëŸ¼, ì „í†µì ì¸ ì ‘ê·¼ ë°©ì‹ìœ¼ë¡œëŠ” ëª¨ë“  ì˜ì¡´ì„±ì„ `node_modules`ì„ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•ì„ npm, yarn classic, pnpm(ì˜ ê²½ìš°ì—” êµ¬ì¡°ê°€ ì¡°ê¸ˆ ë‹¤ë¥´ë‹¤) ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

yarn berryì˜ PnP ëª¨ë“œì—ì„œëŠ” ì¡°ê¸ˆ ë‹¤ë¥¸ ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆë‹¤. `node_modules`ëŒ€ì‹ , ëª¨ë“  ì˜ì¡´ì„±ì„ `zip` íŒŒì¼ë¡œ ì••ì¶•í•˜ì—¬ `.yarn/cache`ì™€ `.pnp.cjs` í˜•íƒœë¡œ ê´€ë¦¬í•œë‹¤.

ëª¨ë‘ ì˜ì•Œê³  ìˆëŠ” ê²ƒì²˜ëŸ¼, ëª¨ë“  íŒ€ì›ì´ (ëª¨ë“  ë¨¸ì‹ ì—ì„œ) ê°™ì€ ë²„ì „ì„ ì„¤ì¹˜í•˜ëŠ” ê²ƒì„ ë³´ì¥í•˜ê¸° ìœ„í•´ lock íŒŒì¼ì€ ë²„ì „ ì»¨íŠ¸ë¡¤ ë‚´ë¶€ì— í¬í•¨ì‹œí‚¤ëŠ” ê²ƒì´ ì¢‹ë‹¤.

## CLI commands

cli ì»¤ë§¨ë“œëŠ” ì›Œë‚™ ë§ê³  ë‹¤ì–‘í•˜ì—¬, ì—¬ê¸°ì—ì„œ ëª¨ë“  ê²ƒì„ ë‹¤ë£¨ì§€ëŠ” ì•Šìœ¼ë ¤ê³  í•œë‹¤. ì•„ë˜ ë‚´ìš©ì€ ê°œë°œê³¼ì •ì—ì„œ ìì£¼ ì“°ì¼ ìˆ˜ ìˆëŠ” ì»¤ë§¨ë“œë¥¼ ëª¨ì•„ ë‘” ê²ƒì´ë‹¤.

### ì˜ì¡´ì„± ê´€ë¦¬

|                                              | npm                       | yarn classic               | yarn berry       | pnpm                     |
| -------------------------------------------- | ------------------------- | -------------------------- | ---------------- | ------------------------ |
| install deps                                 | `npm install`             | `yarn install` or `yarn`   | like classic     | `pnpm install`           |
| update deps                                  | `npm update`              | `yarn upgrade`             | `yarn semver up` | `pnpm update`            |
| update deps to latest                        | N/A                       | `yarn upgrade --latest`    | `yarn up`        | `pnpm update --latest`   |
| update deps interactively                    | N/A                       | `yarn upgrade-interactive` | like classic     | `pnpm up -- interactive` |
| add specific dep                             | `npm i react`             | `yarn add react`           | like classic     | `pnpm add react`         |
| add specific dep in dev                      | `npm i -D babel`          | `yarn add -D babel`        | like Classic     | `pnpm add -D babel`      |
| uninstall deps                               | `npm uninstall react`     | `yarn remove react`        | like Classic     | `pnpm remove react`      |
| uninstall deps without update `package.json` | `npm uninstall --no-save` | N/A                        | N/A              | N/A                      |

### íŒ¨í‚¤ì§€ ê´€ë ¨

ì•„ë˜ ì˜ˆì œëŠ” [ntl](https://github.com/ruyadorno/ntl)ê³¼ ê°™ì€ ë°”ì´ë„ˆë¦¬ íŒŒì¼ ì²˜ëŸ¼, development í™˜ê²½ì—ì„œ ìœ í‹¸ë¦¬í‹° ë„êµ¬ë¥¼ êµ¬ì„±í•˜ëŠ” íŒ¨í‚¤ì§€ë¥¼ ê´€ë¦¬í•˜ëŠ” ëª…ë ¹ì–´ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.

yarn berryì—ì„œëŠ” ë³´ì•ˆìƒì˜ ì´ìœ ë¡œ íŒ¨í‚¤ì§€ì—ì„œ ì§€ì •í•œ ë°”ì´ë„ˆë¦¬ ë˜ëŠ” `package.json`ì— ëª…ì‹œëœ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì—¼ë‘í•´ ë‘ì–´ì•¼ í•œë‹¤. ì´ëŠ” `pnpm`ì—ì„œë„ ë§ˆì°¬ê°€ì§€ë‹¤.

|                                          | npm            | yarn classic         | yarn berry     | pnpm                    |
| ---------------------------------------- | -------------- | -------------------- | -------------- | ----------------------- |
| install, update, remove package globally | `npm i -g ntl` | `yarn global ad ntl` | N/A            | `pnpm add --global ntl` |
| run binaries from terminal               | `npm exec ntl` | `yarn ntl`           | `yarn ntl`     | `pnpm ntl`              |
| run binaries from script                 | `ntl`          | `ntl`                | `ntl`          | `ntl`                   |
| dynamic package execution                | `npx ntl`      | N/A                  | `yarn dlx ntl` | `pnpm dlx ntl`          |

### ìì£¼ ì“°ì´ëŠ” ì»¤ë§¨ë“œ

|                       | npm               | yarn classic    | yarn berry                 | pnpm            |
| --------------------- | ----------------- | --------------- | -------------------------- | --------------- |
| publish               | `npm publish`     | `yarn publish`  | `yarn npm publish`         | `pnpm publish`  |
| list installed deps   | `npm ls`          | `yarn list`     | like Classic               | `pnpm list`     |
| list outdated deps    | `npm outdated`    | `yarn outdated` | `yarn upgrade-interactive` | `pnpm outdated` |
| print info about deps | `npm explain ntl` | `yarn why ntl`  | like Classic               | `pnpm why ntl`  |
| init project          | `npm init`        | `yarn init`     | `yarn init`                | `pnpm init`     |

## ì„±ëŠ¥ê³¼ ë””ìŠ¤í¬ ê´€ë¦¬ì˜ íš¨ìœ¨ì„±

ì„±ëŠ¥ì€ ì˜ì‚¬ê²°ì •ì„ í•˜ëŠ”ë° ìˆì–´ ì¤‘ìš”í•œ ë¶€ë¶„ì´ë‹¤. ì´ ì„¹ì…˜ì—ì„œëŠ” ê° í”„ë¡œì íŠ¸ì˜ ë²¤ì¹˜ ë§ˆí¬ ì„±ëŠ¥ì„ ë‹¤ë£¬ë‹¤.

- https://p.datadoghq.eu/sb/d2wdprp9uki7gfks-c562c42f4dfd0ade4885690fa719c818?tpl_var_npm=%2A&tpl_var_pnpm=%2A&tpl_var_yarn-classic=%2A&tpl_var_yarn-modern=%2A&tpl_var_yarn-nm=%2A&tpl_var_yarn-pnpm=no&from_ts=1645791374255&to_ts=1653567374255&live=true
- https://pnpm.io/benchmarks

ì„±ëŠ¥ìœ¼ë¡œ ë¯¸ë¤„ ë³´ê±´ë°, `yarn berry` + `Plug n Play strict`ê°€ ê°€ì¥ ì„¤ì¹˜ë„ ë¹ ë¥´ê³  ë””ìŠ¤í¬ íš¨ìœ¨ì ì¸ ëª¨ìŠµì„ ë³´ì—¬ì£¼ì—ˆê³ , ê·¸ë‹¤ìŒìœ¼ë¡œëŠ” pnpmì´ ë’¤ë¥¼ ì´ì—ˆë‹¤.

## ë³´ì•ˆ

### npm

npmì€ ê·¸ ì—­ì‚¬ê°€ ì˜¤ë˜ëœ ë§Œí¼ ì‚¬ê±´ ì‚¬ê³ ë„ ë§ì•˜ë‹¤. [ê³¼ê±° npm v5.7.0ì—ì„œ íŒŒì¼ì‹œìŠ¤í…œ ê¶Œí•œì„ ë°”ê¿€ ìˆ˜ ìˆëŠ” ë²„ê·¸](https://github.com/npm/npm/issues/19883)ê°€ ë°œê²¬ëœ ì ë„ ìˆë‹¤. `sudo npm` ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ë©´, ì‹œìŠ¤í…œ íŒŒì¼ì˜ ì†Œìœ ê¶Œì„ ë³€ê²½í•˜ê²Œ ë˜ì–´ osë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ê²Œëœ ì ì´ ìˆì—ˆë‹¤.

2018ë…„ì—ëŠ” ë¹„íŠ¸ì½”ì¸ê³¼ ê´€ë ¨ëœ ì‚¬ê±´ ì‚¬ê³ ë„ ìˆì—ˆë‹¤. [EventStream](https://www.npmjs.com/package/event-stream) [íŒ¨í‚¤ì§€ v3.3.6ì—ì„œ ì•…ì˜ì ì¸ ì˜ì¡´ì„±ì´ ì¶”ê°€ë˜ì–´, ê°œë°œìì˜ ì»´í“¨í„°ì—ì„œ ë¹„íŠ¸ì½”ì¸ì„ í›”ì¹˜ê³ ì í•˜ëŠ” ì•…ì˜ì ì¸ ì½”ë“œê°€ ì¡´ì¬í•œ ë°” ìˆë‹¤.](https://blog.npmjs.org/post/180565383195/details-about-the-event-stream-incident.html)

ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´, ìš”ì¦˜ ìµœì‹ ë²„ì „ì˜ npm ì—ì„œëŠ” package-lock.jsonì—ì„œ SHA-512 ì•Œê³ ë¦¬ì¦˜ì„ í™•ì¸í•˜ì—¬ ì„¤ì¹˜í•˜ê³ ì í•˜ëŠ” íŒ¨í‚¤ì§€ì˜ ë¬´ê²°ì„±ì„ í™•ì¸í•œë‹¤.

ì „ë°˜ì ìœ¼ë¡œ npmì€ ì‚¬ê±´ì‚¬ê³ ê°€ ë§ì•˜ë˜ ê²ƒ ë§Œí¼, ë³´ì•ˆ ë¬¸ì œì— ê°ë³„íˆ ì‹ ê²½ì„ ë§ì´ ì“°ê³  ìˆëŠ” ì¶”ì„¸ë‹¤.

### yarn

yarn classic, yarn berry ë‘˜ë‹¤ ì²˜ìŒë¶€í„° `yarn.lock`ì— ì§€ì •ëœ ì²´í¬ì„¬ì„ í™œìš©í•˜ì—¬ ê° íŒ¨í‚¤ì§€ì˜ ë¬´ê²°ì„±ì„ í™•ì¸í•œë‹¤. ë˜í•œ `package.json` ë‚´ë¶€ì— ì„ ì–¸ë˜ì§€ ì•Šì€ ì˜ì‹¬ìŠ¤ëŸ¬ìš´ íŒ¨í‚¤ì§€ê°€ ì¡´ì¬í•˜ë©´ ì„¤ì¹˜ê°€ ì¤‘ë‹¨ëœë‹¤.

yarn berryëŠ” ì´ì— ë”í•´ [package.jsonì—ì„œ ëª…ì‹œí•œ ì˜ì¡´ì„±ì˜ ë°”ì´ë„ˆë¦¬ íŒŒì¼ë§Œ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.](https://github.com/yarnpkg/berry/issues/2784#issuecomment-831825366) ì´ëŠ” pnpmê³¼ ìœ ì‚¬í•˜ë‹¤.

### pnpm

pnpm ë˜í•œ ì²´í¬ì„¬ì„ í™œìš©í•˜ì—¬ íŒ¨í‚¤ì§€ì˜ ë¬´ê²°ì„±ì„ í™•ì¸í•œë‹¤. pnpmì€ [npmê³¼ yarn classicì—ì„œ ì´ìŠˆê°€ ë˜ëŠ” íŒ¨í‚¤ì§€ í˜¸ì´ìŠ¤íŒ…](https://www.mo4tech.com/deep-thoughts-on-modern-package-managers-why-do-i-now-recommend-pnpm-over-npm-yarn-2.html)ì„ í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í”¼í•œë‹¤. ì´ ëŒ€ì‹ , ìœ„í—˜í•œ dependency ì•¡ì„¸ìŠ¤ì˜ ìœ„í—˜ì„±ì„ ì œê±°í•˜ëŠ” ë‚´ë¶€ì— ì¤‘ì²©ëœ `node_modules`í´ë”ë¥¼ ìƒì„±í•œë‹¤. ì¦‰, dependencyê°€ package.json ì—ì„œ ëª…ì‹œì ìœ¼ë¡œ ì„ ì–¸ëœ ê²½ìš°ì—ë§Œ ë‹¤ë¥¸ dependencyì— ì•¡ì„¸ìŠ¤ í•  ìˆ˜ ìˆë‹¤.

## ê²°ë¡ 

í˜„ì¬ ëŒ€ë¶€ë¶„ì˜ íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ë“¤ì€ ëª¨ë‘ ì‚¬ìš©í•˜ê¸°ì— ë¬´ë¦¬ê°€ ì—†ëŠ” ìˆ˜ì¤€ê¹Œì§€ ê¸°ëŠ¥ì´ êµ¬ì„±ë˜ì–´ ìˆë‹¤. ëŒ€ë¶€ë¶„ì˜ íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ê°€ ê¸°ëŠ¥ì„± ì‚¬ì´ì—ì„œ ë™ë“±í•¨ì„ ë³´ì´ê³  ìˆë‹¤. ë¬¼ë¡ , ê·¸ ì•„ë˜ì—ì„œ ë™ì‘í•˜ëŠ” ë°©ì‹ì€ ë§¤ìš° ë‹¤ë¥´ë‹¤.

pnpmì€ npmê³¼ ë¹„ìŠ·í•´ë³´ì´ì§€ë§Œ, ì¢…ì†ì„± ê´€ë¦¬ ì¸¡ë©´ì—ì„œ ë§¤ìš° ë‹¤ë¥¸ ëª¨ìŠµì„ ë³´ì¸ë‹¤. pnpmì„ ì‚¬ìš©í•˜ë©´ ì„±ëŠ¥ì´ í–¥ìƒë˜ê³ , ë””ìŠ¤í¬ íš¨ìœ¨ì„±ì„ ê·¹ëŒ€í™” í•  ìˆ˜ ìˆë‹¤. yarn classicë„ í›Œë¥­í•œ ì„ íƒì§€ì´ì§€ë§Œ, ë ˆê±°ì‹œë¡œ ê°„ì£¼ë˜ê³  ê°€ê¹Œìš´ ë¯¸ë˜ì— ì§€ì›ì´ ì¤‘ë‹¨ë  ìˆ˜ë„ ìˆëŠ” ê°€ëŠ¥ì„±ì´ ì¡´ì¬í•´ì„œ ì„ íƒí•˜ëŠ” ê²ƒì„ ì¶”ì²œí•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤. yarn berryì˜ plug n play ëŠ” ì™„ì „íˆ ìƒˆë¡œìš´ í˜ì‹ ìœ¼ë¡œ ë‹¤ê°€ì™”ì§€ë§Œ, ì•„ì§ ê·¸ ëª¨ë“  ì ì¬ë ¥ì„ ë‹¬ì„±í•œ ê²ƒ ê°™ì§€ëŠ” ì•Šë‹¤. ê·¸ëŸ¼ì—ë„ ìš”ì¦˜ ì‚¬ëŒë“¤ì´ ë§ì´ ì“°ëŠ” íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ëŠ” yarn berryì˜ pnp ì¸ ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤. ì„±ëŠ¥ê³¼ ë””ìŠ¤í¬ íš¨ìœ¨ì„±, ì†ë„ ëª¨ë‘ì—ì„œ ë›°ì–´ë‚œ ëª¨ìŠµì„ ë³´ì´ê³  ìˆë‹¤.

ì´ê²ƒ ì €ê²ƒ ìƒê°í•˜ê¸° ì‰½ì§€ ì•Šê³ , ë˜ ë¹ ë¥´ê³  ì‰½ê²Œ ì ‘ê·¼í•˜ê³  ì‹¶ë‹¤ë©´ npmì„ ì“°ëŠ” ê²ƒë„ ë‚˜ì˜ì§€ ì•Šë‹¤. ë¬¼ë¡  ë‹¤ë¥¸ íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ì— ë¹„í•´ì„œ ì„±ëŠ¥ì´ë‚˜ ì†ë„ë©´ì—ì„œ ë’¤ì³ì§€ëŠ” ê°ì´ ìˆì§€ë§Œ, ê¸´ ì—­ì‚¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ë§ì€ ë¬¸ì„œì™€ ì‹œí–‰ì°©ì˜¤ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” ë‹¤ì–‘í•œ ê¸€ë“¤ì€, ì´ˆë³´ìë“¤ì´ ì ‘ê·¼í•˜ê¸°ì—ëŠ” ê°€ì¥ ìš©ì´í•œ ì„ íƒì§€ê°€ ë  ê²ƒì´ë‹¤.

## ì°¸ê³ 

- https://blog.logrocket.com/javascript-package-managers-compared/
- https://medium.com/wantedjobs/yarn-berry-%EC%A0%81%EC%9A%A9%EA%B8%B0-1-e4347be5987
- https://toss.tech/article/node-modules-and-yarn-berry
- https://d2.naver.com/helloworld/0923884
- https://d2.naver.com/helloworld/7553804
