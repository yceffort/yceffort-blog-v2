---
title: 'npm, yarn, pnpm ë¹„êµí•´ë³´ê¸°'
tags:
  - javascript
  - npm
  - yarn
  - pnpm
published: true
date: 2022-05-20 22:26:01
description: 'ê·¸ë¦¬ê³  ìŠ¹ìžëŠ” ðŸ¤”'
---

## Table of Contents

## Introduction

npm ì—ì„œ ì‹œìž‘í•œ node package managementì˜ ì—­ì‚¬ëŠ”, ì´ì œ 3ê°€ì§€ ì˜µì…˜ì´ ì£¼ì–´ì ¸ ìžˆë‹¤. yarn 1.0 (ì´ì œ yarn classic ì´ë¼ê³  ë¶€ë¥´ê² ë‹¤) ê³¼ yarn 2.0 (yarn berry) ë‘ ê°€ì§€ ë²„ì „ë„ ì‚¬ë­‡ ë‹¤ë¥¸ ì ì´ ë§Žë‹¤ëŠ” ê²ƒì„ ê°ì•ˆí•œë‹¤ë©´, ì´ì œ í¬ê²Œ 4ê°€ì§€ ì„ íƒì§€ê°€ ì¡´ìž¬ í•œë‹¤ê³  ë³¼ ìˆ˜ ìžˆë‹¤.

ê·¸ë¦¬ê³  ìœ„ 3ê°€ì§€ íŒ¨í‚¤ì§€ ê´€ë¦¬ìžë“¤ì€ ì•„ëž˜ì™€ ê°™ì€ ê¸°ë³¸ì ì¸ ê¸°ëŠ¥ (node ëª¨ë“ˆì„ ì„¤ì¹˜í•˜ê³ , ê´€ë¦¬í•˜ëŠ” ë“±)ì„ ì œê³µí•˜ê³  ìžˆë‹¤.

- metadata ìž‘ì„± ë° ê´€ë¦¬
- ëª¨ë“  dependencies ì¼ê´„ ì„¤ì¹˜ ë˜ëŠ” ì—…ë°ì´íŠ¸
- dependencies ì¶”ê°€, ì—…ë°ì´íŠ¸, ì‚­ì œ
- ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
- íŒ¨í‚¤ì§€ í¼ë¸”ë¦¬ì‰¬
- ë³´ì•ˆ ê²€ì‚¬

ë”°ë¼ì„œ ì„¤ì¹˜ ì†ë„ë‚˜ ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰, ë˜ëŠ” ê¸°ì¡´ ì›Œí¬ í”Œë¡œìš° ë“±ê³¼ ì–´ë–»ê²Œ ë§¤ì¹­ ì‹œí‚¬ì§€ì™€ ê°™ì€ ê¸°ëŠ¥ ì™¸ì ì¸ ìš”êµ¬ ì‚¬í•­ì— ë”°ë¼ íŒ¨í‚¤ì§€ ê´€ë¦¬ìžë¥¼ ì„ íƒí•˜ëŠ” ì‹œëŒ€ê°€ ë„ëž˜í–ˆë‹¤ê³  ë³¼ ìˆ˜ ìžˆë‹¤.

ê²‰ìœ¼ë¡œëŠ” ê¸°ëŠ¥ì ìœ¼ë¡œ ë¹„ìŠ·í•´ë³´ì´ê³  ë¬´ì—‡ì„ ì„ íƒí•˜ë“  ë³„ ì°¨ì´ëŠ” ì—†ì–´ë³´ì´ì§€ë§Œ, íŒ¨í‚¤ì§€ ê´€ë¦¬ìžë“¤ì˜ ë‚´ë¶€ ë™ìž‘ì€ ë§¤ìš° ë‹¤ë¥´ë‹¤. npm ê³¼ yarnì˜ ê²½ìš° flat í•œ node_modules í´ë”ì— dependencies ë¥¼ ì„¤ì¹˜í–ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì´ëŸ¬í•œ ì „ëžµì€ ë¹„íŒì—ì„œ ìžìœ ë¡­ì§€ ëª»í•˜ë‹¤. (ì–´ë–¤ ë¬¸ì œì¸ì§€ëŠ” ë’¤ì—ì„œ ì„¤ëª…í•˜ë„ë¡ í•œë‹¤.)

ê·¸ëž˜ì„œ ë“±ìž¥í•œ pnpmì€ ì´ëŸ¬í•œ dependenciesë¥¼ ì¤‘ì²©ëœ node_modules í´ë”ì— íš¨ìœ¨ì ìœ¼ë¡œ ì €ìž¥í•˜ê¸° ì‹œìž‘í–ˆê³ , yarn berryëŠ” plug and play (pnp) ëª¨ë“œë¥¼ ë„ìž…í•˜ì—¬ ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ì‹œìž‘í–ˆë‹¤.

ì´ ì„¸ê°€ì§€ íŒ¨í‚¤ì§€ ê´€ë¦¬ìžëŠ” ê°ê° ì–´ë–¤ íŠ¹ì§•ê³¼ ì—­ì‚¬ë¥¼ ê°€ì§€ê³  ìžˆìœ¼ë©°, ë¬´ì—‡ì„ ì„ íƒí•´ì•¼í• ê¹Œ?

- [npm](https://www.npmjs.com/)
- [yarn classic](https://classic.yarnpkg.com/lang/en/)
- [yarn berry](https://github.com/yarnpkg/berry)
- [pnpm](https://pnpm.io/ko/)

> pnpm í™ˆíŽ˜ì´ì§€ì— ìžˆëŠ” yarnê³¼ npmì„ ì“°ë ˆê¸°í†µì— ì³ë°•ì€ ì´ë¯¸ì§€ê°€ ë§¤ìš° ì¸ìƒì ì´ë‹¤. ðŸ¤” vueê°€ reactë¥¼ ì“°ë ˆê¸°í†µì— ì³ë°•ëŠ” ì´ë¯¸ì§€ë¥¼ ë‹¬ì•„ë†¨ë‹¤ë©´...

## ìžë°”ìŠ¤í¬ë¦½íŠ¸ íŒ¨í‚¤ì§€ ê´€ë¦¬ìžì˜ ì—­ì‚¬

ëª¨ë‘ê°€ ìž˜ ì•Œê³  ìžˆëŠ” ê²ƒ ì²˜ëŸ¼ ìµœì´ˆì˜ íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ëŠ” 2010ë…„ 1ì›”ì— ë‚˜ì˜¨ npm ì´ë‹¤. npm ì€ íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ê°€ ì–´ë–¤ ë™ìž‘ì„ í•´ì•¼í•˜ëŠ” ì§€ì— ëŒ€í•œ í•µì‹¬ì ì¸ ê°œë…ì„ ìž¡ì•˜ë‹¤ê³  ë³¼ ìˆ˜ ìžˆë‹¤.

10ì—¬ë…„ì´ ë„˜ëŠ” ì‹œê°„ ë™ì•ˆ npm ì´ ì¡´ìž¬í–ˆëŠ”ë°, yarn, pnpm ë“±ì´ ë“±ìž¥í•˜ê²Œ ëœ ê²ƒì¼ê¹Œ?

- `node_modules` íš¨ìœ¨í™”ë¥¼ ìœ„í•œ ë‹¤ë¥¸ êµ¬ì¡° (nested vs flat, node_modules, vs pnp mode)
- ë³´ì•ˆì— ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” í˜¸ì´ìŠ¤íŒ… ì§€ì›
- ì„±ëŠ¥ì— ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìžˆëŠ” `lock`íŒŒì¼ í˜•ì‹
- ë””ìŠ¤í¬ íš¨ìœ¨ì„±ì— ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” íŒ¨í‚¤ì§€ë¥¼ ë””ìŠ¤í¬ì— ì €ìž¥í•˜ëŠ” ë°©ì‹
- ëŒ€ê·œëª¨ ëª¨ë…¸ë ˆí¬ì˜ ìœ ì§€ ë³´ìˆ˜ì„± ê³¼ ì†ë„ì— ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” workspaceë¼ ì•Œë ¤ì§„ ë©€í‹° íŒ¨í‚¤ì§€ ê´€ë¦¬ ë° ì§€ì›
- ìƒˆë¡œìš´ ë„êµ¬ì™€ ëª…ë ¹ì–´ ê´€ë¦¬ì— ëŒ€í•œ ê´€ë¦¬
  - ì´ì™€ ê´€ë ¨ëœ ë‹¤ì–‘í•˜ê³  í™•ìž¥ê°€ëŠ¥í•œ í”ŒëŸ¬ê·¸ì¸ê³¼ ì»¤ë®¤ë‹ˆí‹° íˆ´
- ë‹¤ì–‘í•œ ê¸°ëŠ¥ êµ¬í˜„ ê°€ëŠ¥ì„±ê³¼ ìœ ì—°í•¨

npm ì´ ìµœì´ˆë¡œ ë“±ìž¥í•˜ ì´ëž˜ë¡œ ì´ëŸ¬í•œ ë‹ˆì¦ˆê°€ ì–´ë–»ê²Œ ë‚˜íƒ€ë‚¬ëŠ”ì§€, yarn classicì€ ê·¸ ì´í›„ ë“±ìž¥í•´ì„œ ì–´ë–»ê²Œ í•´ê²°í–ã……ëŠ”ì§€, pnpmì´ ì´ëŸ¬í•œ ê°œë…ì„ ì–´ë–»ê²Œ í™•ìž¥í–ˆëŠ”ì§€, yarn berryê°€ ì „í†µì ì¸ ê°œë…ê³¼ í”„ë¡œí…ŒìŠ¤ì— ì˜í•´ ì„¤ì •ëœ í‹€ì„ ê¹¨ê¸° ìœ„í•´ ì–´ë– í•œ ë…¸ë ¥ì„ í–ˆëŠ”ì§€ ê°„ëžµí•œ ì—­ì‚¬ë¥¼ íŒŒì•…í•´ë³´ìž.

### ì„ êµ¬ìž npm

ë³¸ê²©ì ìœ¼ë¡œ ì‹œìž‘í•˜ê¸°ì— ì•žì„œ ìž¬ë°ŒëŠ” ì‚¬ì‹¤ì„ ì´ì•¼ê¸° í•´ë³´ìžë©´, `npm`ì€ `node package manager`ì˜ ì•½ìžê°€ ì•„ë‹ˆë‹¤. npmì˜ ì „ì‹ ì€ ì‚¬ì‹¤ `pm`ì´ë¼ ë¶ˆë¦¬ëŠ” bash ìœ í‹¸ë¦¬í‹°ì¸ë°, ì´ëŠ” `pkgmakeinst`ì˜ ì•½ìžë‹¤. ê·¸ë¦¬ê³  ì´ì˜ node ë²„ì „ì´ `npm`ì¸ ê²ƒì´ë‹¤.

> [https://github.com/npm/cli#is-npm-an-acronym-for-node-package-manager](https://github.com/npm/cli#is-npm-an-acronym-for-node-package-manager)

npm ì´ì „ì—ëŠ” í”„ë¡œì íŠ¸ì˜ dependenciesë¥¼ ìˆ˜ë™ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œí•˜ê³  ê´€ë¦¬í•˜ì˜€ê¸° ë•Œë¬¸ì— ì—„ì²­ë‚œ í˜ëª…ì„ ê°€ì ¸ì™”ë‹¤ê³  ë³¼ ìˆ˜ ìžˆë‹¤. ì´ì™€ ë”ë¶ˆì–´ ë©”íƒ€ë°ì´í„°ë¥¼ ê°€ì§€ê³  ìžˆëŠ” `package.json`ì™€ ê°™ì€ ê°œë…, dependenciesë¥¼ `node_modules`ë¼ ë¶ˆë¦¬ëŠ” í´ë”ì— ì„¤ì¹˜í•œë‹¤ëŠ” ê°œë…, ì»¤ìŠ¤í…€ ìŠ¤í¬ë¦½íŠ¸, public & private íŒ¨í‚¤ì§€ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì™€ ê°™ì€ ê°œë…ë“¤ ëª¨ë‘ npmì— ì˜í•´ ë„ìž…ë˜ì—ˆë‹¤.

### ë§Žì€ í˜ëª…ì„ ê°€ì ¸ì˜¨ yarn classic

[2016ë…„ì˜ ë¸”ë¡œê·¸ ê¸€](https://engineering.fb.com/2016/10/11/web/yarn-a-new-package-manager-for-javascript/)ì—ì„œ, íŽ˜ì´ìŠ¤ë¶ì€ êµ¬ê¸€ê³¼ ëª‡ëª‡ ë‹¤ë¥¸ ê°œë°œìžë“¤ê³¼ í•¨ê»˜ npmì´ ê°€ì§€ê³  ìžˆë˜ ì¼ê´€ì„±, ë³´ì•ˆ, ì„±ëŠ¥ ë¬¸ì œ ë“±ì„ í•´ê²°í•˜ê¸° ìœ„í•œ ìƒˆë¡œìš´ íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ë¥¼ ë§Œë“¤ê¸° ìœ„í•œ ì‹œë„ë¥¼ ì§„í–‰ ì¤‘ì´ë¼ê³  ë°œí‘œ í–ˆë‹¤. ê·¸ë¦¬ê³  ì´ë“¬í•´ `Yet Another Resource Negotiator`ì˜ ì•½ìžì¸ yarnì„ ë°œí‘œí–ˆë‹¤.

yarnì€ ëŒ€ë¶€ë¶„ì˜ ê°œë…ê³¼ í”„ë¡œì„¸ìŠ¤ì— npmì„ ê¸°ë°˜ìœ¼ë¡œ ì„¤ê³„í–ˆì§€ë§Œ, ì´ì™¸ì— íŒ¨í‚¤ì§€ ê´€ë¦¬ìž í™˜ê²½ì— í° ì˜í–¥ì„ ë¯¸ì³¤ë‹¤. npmê³¼ ëŒ€ì¡°ì ìœ¼ë¡œ, yarnì€ ì´ˆê¸°ë²„ì „ì˜ npmì˜ ì£¼ìš” ë¬¸ì œì  ì¤‘ í•˜ë‚˜ì˜€ë˜ ì„¤ì¹˜ í”„ë¡œì„¸ìŠ¤ì˜ ì†ë„ë¥¼ ë†’ì´ê¸° ìœ„í•´ ìž‘ì—…ì„ ë³‘ë ¬í™” í•˜ì˜€ë‹¤.

yarnì€ dx(ê°œë°œìž ê²½í—˜), ë³´ì•ˆ ë° ì„±ëŠ¥ì— ëŒ€í•œ ê¸°ì¤€ì„ ë†’ì˜€ìœ¼ë©°, ë‹¤ìŒê³¼ ê°™ì€ ê°œë…ì„ íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ì— ë„ìž…í•˜ì˜€ë‹¤.

- native ëª¨ë…¸ë ˆí¬ ì§€ì›
- cache-aware ì„¤ì¹˜
- ì˜¤í”„ë¼ì¸ ìºì‹±
- lock files

yarn classicì€ 2020ë…„ ë¶€í„° ìœ ì§€ë³´ìˆ˜ ëª¨ë“œë¡œ ì „í™˜ë˜ì—ˆë‹¤. ê·¸ë¦¬ê³  1.x ë²„ì „ì€ ëª¨ë‘ ë ˆê±°ì‹œë¡œ ê°„ì£¼í•˜ê³  yarn classicìœ¼ë¡œ ì´ë¦„ì´ ë°”ë€Œì—ˆë‹¤. í˜„ìž¬ëŠ” yarn berryì—ì„œ ê°œë°œê³¼ ê°œì„ ì´ ì´ë£¨ì–´ì§€ê³  ìžˆë‹¤.

### pnpm ë¹ ë¥´ê³  íœ´ì˜¬ì ì¸ ë””ìŠ¤í¬ ê´€ë¦¬

pnpmì€ 2017ë…„ì— ë§Œë“¤ì–´ì¡Œìœ¼ë©°, npm ì˜ drop-in replacement(ì„¤ì •ì„ ë°”ê¿€ í•„ìš” ì—†ì´ ë°”ë¡œ ì‚¬ìš©ê°€ëŠ¥í•˜ë©°, ì†ë„ì™€ ì•ˆì •ì„± ë“± ë‹¤ì–‘í•œ ê¸°ëŠ¥ í–¥ìƒì´ ì´ë£¨ì–´ì§€ëŠ” ëŒ€ì²´í’ˆ) ìœ¼ë¡œ, npmë§Œ ìžˆë‹¤ë©´ ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤.

pnpm ì œìž‘ìžë“¤ì´ ìƒê°í•œ npm ê³¼ yarnì˜ ê°€ìž¥ í° ë¬¸ì œëŠ” í”„ë¡œì íŠ¸ ê°„ì— ì‚¬ìš©ë˜ëŠ” dependenciesì˜ ì¤‘ë³µ ì €ìž¥ì´ë‹¤. yarn classicì´ ë¬¼ë¡  npm ë³´ë‹¤ ë¹ ë¥´ì§€ë§Œ, ë‘ ë§¤ë‹ˆì € ëª¨ë‘ node_modules ë‚´ë¶€ì— flatí•˜ê²Œ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ì—¬ (=ë™ì¼í•œ ë””ë ‰í† ë¦¬ì— flatí•˜ê²Œ ì €ìž¥) ê´€ë¦¬í–ˆë‹¤.

pnpmì€ ì´ëŸ¬í•œ í˜¸ì´ìŠ¤íŠ¸ ë°©ì‹ ëŒ€ì‹ , ë‹¤ë¥¸ dependenciesë¥¼ í•´ê²°í•˜ëŠ” ì „ëžµì¸ [content-addressable storage](https://pnpm.io/next/symlinked-node-modules-structure)ë¥¼ ì‚¬ìš©í–ˆë‹¤. ì´ ë°©ë²•ì„ ì‚¬ìš©í•˜ë©´, home í´ë”ì˜ ê¸€ë¡œë²Œ ì €ìž¥ì†Œ (`~/.pnpm-store`)ì— íŒ¨í‚¤ì§€ë¥¼ ì €ìž¥í•˜ëŠ” ì¤‘ì²©ëœ node_modules í´ë”ê°€ ìƒì„±ëœë‹¤. ë”°ë¼ì„œ ëª¨ë“  ë²„ì „ì˜ dependenciesì€ í•´ë‹¹ í´ë”ì— ë¬¼ë¦¬ì ìœ¼ë¡œ í•œë²ˆë§Œ ì €ìž¥ë˜ë¯€ë¡œ, single source of truthë¥¼ êµ¬ì„±í•˜ê³ , ìƒë‹¹í•œ ë””ìŠ¤í¬ ê³µê°„ì„ ì ˆì•½í•  ìˆ˜ ìžˆë‹¤.

ì´ëŠ” node_modulesì˜ ë ˆì´ì•„ì›ƒì„ í†µí•´ ì´ë£¨ì–´ì§€ê³ , `symlinks`ë¥¼ ì‚¬ìš©í•˜ì—¬ dependenciesì˜ ì¤‘ì²©ëœ êµ¬ì¡°ë¥¼ ìƒì„±í•œë‹¤. ì—¬ê¸°ì„œ í´ë” ë‚´ë¶€ì˜ ëª¨ë“  íŒ¨í‚¤ì§€ íŒŒì¼ì€ ì €ìž¥ì†Œì— ëŒ€í•œ í•˜ë“œ ë§í¬ë¡œ êµ¬ì„±ë˜ì–´ ìžˆë‹¤.

![pnpm](https://d33wubrfki0l68.cloudfront.net/64b2f62af3b1c3dc4314df0ec517d9661d03b934/aca71/assets/images/node-modules-structure-8ab301ddaed3b7530858b233f5b3be57.jpg)

> [https://pnpm.io/blog/2021/12/29/yearly-update](https://pnpm.io/blog/2021/12/29/yearly-update)

### yarn berry, plug n play
